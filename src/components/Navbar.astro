<style>
*,
*::before,
*::after { box-sizing: border-box; }

html, body {
    margin: 0;
    
    scroll-behavior: smooth;
    scrollbar-width: none;
}

html::-webkit-scrollbar, body::-webkit-scrollbar {
    display: none;
}

.site-header{
  position: fixed;
  top: 0; left: 0; right: 0;
  height: 56px;                  /* adjust if you want taller */
  display: flex;
  align-items: center;
  padding: 0 20px;               /* no vertical padding when using fixed height */
  background: var(--c-bg);
  opacity: 0.9;
  backdrop-filter: blur(8px);
  z-index: 1000;
}

.logo{
  color: var(--c-textlight);
  text-decoration: none;
  display: flex;
  align-items: center;
  height: 100%;
}

.nav{
  margin-left: auto;
  height: 100%;
  display: flex;
}

.nav a{
  height: 100%;                  /* key: fill header height */
  display: flex;                 /* key: center text vertically */
  align-items: center;
  padding: 0 16px;
  color: var(--c-textlight);
  text-decoration: none;
  background: transparent;
  transition: background-color .15s ease, color .15s ease;
}

.nav a:hover, .nav a:focus, .nav a:active, .nav a.active{
  background: var(--c-primary);
  color: var(--c-text);
}

main { padding-top: 56px; }      /* must match .site-header height */
</style>

<header class="site-header">
  <a href="/"><img src="/src/assets/logo.png" width="50px" height="50px" alt="Knrc Games Logo"></img></a>

  <nav class="nav">
    <a href="/#home">Home</a>
    <a href="/#games">Featured Projects</a>
    <a href="/#about">About</a>
    <a href="/#contact">Contact</a>
    <a href="/games">Games</a>
  </nav>
</header>

<script>
const nav = document.querySelector(".nav");
if (!nav) throw new Error("Missing .nav");

const links = Array.from(nav.querySelectorAll<HTMLAnchorElement>('a[href^="#"]'));

const setActive = (id: string) => {
  links.forEach(a => a.classList.toggle("active", a.getAttribute("href") === `#${id}`));
};

const sections = links
  .map(a => document.querySelector<HTMLElement>(a.getAttribute("href")!))
  .filter((el): el is HTMLElement => !!el);

const observer = new IntersectionObserver(
  (entries) => {
    // pick the most visible intersecting section
    const visible = entries
      .filter(e => e.isIntersecting)
      .sort((a, b) => (b.intersectionRatio ?? 0) - (a.intersectionRatio ?? 0))[0];

    if (visible?.target instanceof HTMLElement) setActive(visible.target.id);
  },
  {
    root: null,
    threshold: [0.2, 0.4, 0.6],          // tune if needed
    rootMargin: "-20% 0px -60% 0px"      // “activation band” in viewport (common trick)
  }
);

sections.forEach(s => observer.observe(s));

links.forEach(a => {
  a.addEventListener("click", () => {
    const id = a.getAttribute("href")!.slice(1);
    setActive(id);
  });
});
</script>

<main>
</main>
